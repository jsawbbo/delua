set(Lua_PARENT_DIR "@Lua_PARENT_DIR@")

# Configuration
set(LUA_FOUND true)
set(LUA_VERSION_STRING "@Lua_VERSION@")
set(LUA_VERSION_MAJOR "@Lua_VERSION_MAJOR@")
set(LUA_VERSION_MINOR "@Lua_VERSION_MINOR@")
set(LUA_VERSION_PATCH "@Lua_VERSION_PATCH@")

if(NOT Lua_PARENT_DIR)
	# System installed build.
	message(STATUS "Delua: using system build.")

    set(LUA_INCLUDE_DIR "@CMAKE_INSTALL_PREFIX@/include/lua/@Lua_VERSION_MAJOR@.@Lua_VERSION_MINOR@")
    set(LUA_LIBRARIES "Lua::Library")

    set(LUA_BUILD_STATIC @LUA_BUILD_STATIC@)
    set(LUA_BUILD_SHARED @LUA_BUILD_SHARED@)
    set(LUA_BUILD_INTERPRETER @LUA_BUILD_INTERPRETER@)
    set(LUA_BUILD_COMPILER @LUA_BUILD_COMPILER@)

    find_library(LUA_MATH_LIBRARY m)

    # Delua targets FIXME
    if(LUA_BUILD_SHARED)
        set(__lua_imported LuaLib)
    elseif(LUA_BUILD_STATIC)
        set(__lua_imported LuaLibStatic)
    endif(LUA_BUILD_SHARED)

    add_library(Lua::Library INTERFACE IMPORTED)
    set_property(TARGET Lua::Library
        PROPERTY
            INTERFACE_LINK_LIBRARIES "${__lua_imported} ${CMAKE_DL_LIBS} ${LUA_MATH_LIBRARY}"
            INCLUDE_DIRECTORIES "${LUA_INCLUDE_DIR}")

else(NOT Lua_PARENT_DIR)
    # Embedded (as sub-project) build.
    message(STATUS "Delua: using embedded build.")

    set(LUA_INCLUDE_DIR "@Lua_SOURCE_DIR@/src;@Lua_BINARY_DIR@/include")
    set(LUA_LIBRARIES "Lua::Library")
endif(NOT Lua_PARENT_DIR)
